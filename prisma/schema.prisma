generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ========================
// Enums
// ========================
enum AppointmentType {
  vaccination
  checkup
  surgery
  emergency
  grooming
  dental
}

enum AppointmentStatus {
  pending
  completed
  cancelled
}

model Vet {
  id           String        @id @default(cuid())
  name         String        
  phone        String?
  appointments Appointment[] @relation("VetAppointments")
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}


model Room {
  id           String        @id @default(cuid())
  name         String        @unique
  location     String?
  appointments Appointment[] @relation("RoomAppointments")
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

model Appointment {
  id        String   @id @default(cuid())
  petName   String
  ownerName String
  type      AppointmentType
  status    AppointmentStatus
  notes     String?
  duration  Int
  startAt   DateTime
  endAt     DateTime

  // Relations
  vet   Vet   @relation("VetAppointments", fields: [vetId], references: [id])
  vetId String

  room  Room  @relation("RoomAppointments", fields: [roomId], references: [id])
  roomId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([startAt])
  @@index([endAt])
  @@index([vetId])
  @@index([roomId])
}